## SIde Markdown (React + Electron text editor)

A desktop text/Markdown editor with **multi tabs**, **live Markdown preview (split view)**, **cross-platform menus & shortcuts**, and **common text encodings** (UTF-8 / UTF-16LE / GBK / GB18030 / ANSI Win-1252). Built and packaged with **electron-builder** for Windows and macOS.

### Release notes (v1.1.0)

- Added automatic in-app updates via GitHub Releases (electron-updater).
- Fixed preview scroll not following editor scroll.

### Tech stack

- **Renderer**: React 18 + TypeScript + Vite
- **Main/Preload**: Electron + tsup (compiled into `dist-electron/`)
- **Markdown**: `marked` + `highlight.js` + `dompurify` (safe HTML sanitization)
- **Encoding**: `chardet` (detection) + `iconv-lite` (decode/encode)
- **Packaging**: electron-builder (Win: nsis + portable; macOS: dmg + zip)

### Project structure

- `electron/main.ts`: main process (window, menus, IPC, file I/O)
- `electron/preload.ts`: preload script (`contextBridge` exposes a safe API)
- `src/`: React renderer (multi-tab editor, Markdown preview, status bar, etc.)

### Development

1) Install dependencies

```bash
npm i
```

2) Start dev mode (Vite + tsup watch + Electron)

```bash
npm run dev
```

### Build & release (electron-builder)

Build renderer + main/preload first:

```bash
npm run build
```

#### macOS (macOS 12+)

```bash
npm run dist:mac
```

Artifacts will be in `release/` (`dmg` + `zip`).

#### Windows (Win10/11)

```bash
npm run dist:win
```

Artifacts will be in `release/` (NSIS installer + portable exe).

### Auto update (GitHub Releases)

- The app checks GitHub Releases in the background on startup, shows a **red dot** in the in-app menu when a new version is available, and installs the update after you click it.
- **Windows**: auto update works with the **NSIS installer** build (portable exe does **not** support auto update).
- **macOS**: auto update uses the `zip` artifact generated by electron-builder.
- Required release assets:
  - **macOS**: `latest-mac.yml` + `*.zip` (+ `*.blockmap`)
  - **Windows**: `latest.yml` + `*.exe` (+ `*.blockmap`)

#### Publishing to GitHub

Use `electron-builder --publish` so the required `latest-*.yml` files are uploaded automatically.

You must provide a GitHub token:

```bash
export GH_TOKEN="YOUR_GITHUB_PAT"
```

Recommended scripts (publish per-arch):

```bash
# macOS (Apple Silicon)
npm run dist:mac:apple:publish

# macOS (Intel)
npm run dist:mac:intel:publish

# Windows (run on Windows)
npm run dist:win:publish
```

### Notes (cross-platform packaging)

- **Build on the target OS**: build macOS apps on macOS, Windows apps on Windows (toolchains/signing/system components differ).
- This project ships **without code signing** by default (`dmg.sign=false`). For production releases, add certificates and signing.

### Screenshots

**Preview**

![Preview](docs/images/preview_1.jpg)

**Dark mode**

![Dark mode](docs/images/preview_2.jpg)

**Docked mode**

![Docked mode](docs/images/preview_3.jpg)

### Features

- **File**: New / Open (multi-select) / Save / Save As / Close Tab / Quit
- **Edit**: Undo/Redo, Cut/Copy/Paste, Select All, Find/Replace, Go to Line, Insert Date/Time
- **Format/View**: Word wrap, Font settings, Status bar toggle, Markdown edit/preview/split toggle
- **Encoding**: UTF-8 / UTF-16LE / GBK / GB18030 / ANSI (Win-1252)


